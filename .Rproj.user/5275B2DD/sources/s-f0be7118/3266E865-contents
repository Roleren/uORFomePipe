#' all features of Riboseq and RNAseq
allFeaturesAtlas <- function(){
  #validate ribo and rna
  #validateRiboRNAPairs()

  # first sequence features
  getSequenceFeatures()

  # then computeFeatures
  getAllFeaturesFromUorfs()
  # then rfpTables
  riboAtlasFPKMTissue() # fix this is wrong

  # then rna tables
  getRNAFpkms()
  rnaAtlasFPKMTissue()
  # then do te tables
  getTeFeatures()
  teAtlasTissue()

  #cds and 3'
  getCDSFeatures()
  getFeaturesThreeUTRs()
}

#' Main function to fill uORF database
createCatalogueDB <- function(df.cage = df.cage, df.rna = df.rna,
                              df.rfp = df.rfp,
                              dataBaseFolder = dataBaseFolder,
                              idFolder = idFolder,
                              dataFolder = dataFolder) {
  setwd(dataBaseFolder)
  uorfDB <- uORFomePipe:::createDataBase("uorfCatalogue.sqlite")
  createUniqueIDs(list.files(idFolder)) # IDs for uORFs
  createGRObjects() # GRanges objects for all uORFs
  createUORFAtlas(list.files(idFolder)) # Per CAGE reassigned tx annotation, does uORF exist ?
  getTissueTable(df.cage)  # Per CAGE tissue, does uORF exist ?
  allFeaturesAtlas() # Ribo-seq and RNA-seq features
}
